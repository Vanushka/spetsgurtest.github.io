const swiper=new Swiper("#main_slider",{loop:!0,speed:600,width:null,height:280,breakpoints:{768:{height:null,slidesPerView:1,centeredSlides:!0,centeredSlidesBounds:!0}},autoplay:{delay:3e3,disableOnInteraction:!1},pagination:{el:".swiper-pagination",clickable:!0,renderBullet:function(e,t){return`<span class="${t}"></span>`}},on:{slideChangeTransitionStart:()=>{void 0!==document.querySelectorAll(".main-slider .content")&&document.querySelectorAll(".main-slider .left .content").forEach(e=>{e.style.opacity=0}),void 0!==document.querySelector(".main-slider .right .name")&&document.querySelectorAll(".main-slider .right .name").forEach(e=>{e.style.opacity=0});var t=document.getElementsByClassName("swiper-pagination-bullet");for(let e=0;e<t.length;e++)"swiper-pagination-bullet swiper-pagination-bullet-active"===t[e].className&&(document.querySelector(".count-active").innerText=e+1)},slideChangeTransitionEnd:()=>{var t=document.getElementsByClassName("swiper-pagination-bullet");let n=document.querySelectorAll(".main-slider .left .content"),o=document.querySelectorAll(".main-slider .right .name");for(let e=0;e<t.length;e++)"swiper-pagination-bullet swiper-pagination-bullet-active"===t[e].className&&(n[e].style.opacity=1,o[e].style.opacity=1)}}});function init(){var e=new ymaps.multiRouter.MultiRoute({referencePoints:[[55.883624,37.605382],[55.883037,37.606666]],params:{routingMode:"pedestrian"}},{wayPointStartVisible:!1,routeStrokeColor:"#F07D46",routeActiveStrokeColor:"#F07D46",wayPointFinishIconLayout:"default#image",wayPointFinishIconImageHref:"./assets/img/label.svg",wayPointFinishIconImageSize:[64,64],wayPointFinishIconImageOffset:[-30,-55],boundsAutoApply:!1,zoomMargin:[0,1e3,0,0]});let t=new ymaps.Map("map",{center:768<window.innerWidth?[55.88342,37.604382]:[55.8841,37.605882],zoom:17.5,controls:[]},{});t.geoObjects.add(e),t.behaviors.disable("scrollZoom"),t.behaviors.disable("drag")}document.querySelector(".main-slider .right .name").style.opacity=1,document.querySelector(".main-slider .left .content").style.opacity=1,document.addEventListener("DOMContentLoaded",function(e){if(window.innerWidth<1024){new Swiper("#slider_gallery",{loop:!0,speed:600,width:null,height:null,slidesPerView:1.2,spaceBetween:20,autoplay:{delay:3e3,disableOnInteraction:!1}});var t=document.querySelector(".photo-block").offsetHeight,n=document.getElementById("slider_gallery").offsetHeight;document.querySelector(".photo-overlay").style.height=`${t+n}px`;var o=document.querySelectorAll(".description-slider .content"),n=document.querySelector(".main-slider .left").offsetHeight;for(let e=contentsHeight=0;e<o.length;e++)o[e].offsetHeight>contentsHeight&&(contentsHeight=o[e].offsetHeight);contentsHeight+=n,document.querySelector(".main-slider .left").style.height=`${contentsHeight}px`}}),ymaps.ready(init);let phoneInputs=document.querySelectorAll("input[name=phone]");for(let e=0;e<phoneInputs.length;e++)new IMask(phoneInputs[e],{mask:"+{7} (000) 000-00-00"});function toggle(e,n){if(e.classList.contains(n)){e.classList.remove(n);let t=document.querySelectorAll("form");for(let e=0;e<t.length;e++)t[e].reset();removeValidation(e)}else e.classList.add(n);return!0}document.querySelectorAll(".toggle-modal").forEach(e=>e.addEventListener("click",e=>{toggle(document.querySelector(".overlay"),"active"),toggle(document.querySelector(".modal"),"active")}));let removeValidation=function(e){let t=e.querySelectorAll(".error");for(let e=0;e<t.length;e++)t[e].classList.contains("input")?t[e].classList.remove("error"):t[e].remove()},generateError=function(e){let t=document.createElement("div");return t.className="error",t.innerHTML=e,t},checkFieldsPresence=function(t){let n=!0,o=t.querySelectorAll("input");for(let e=0;e<o.length;e++){var l,r;""===o[e].value.trim()&&(l=generateError("Поле не может быть пустым"),t[e].parentElement.classList.add("error"),t[e].parentElement.insertBefore(l,o[e].nextSibling),n=!1),"name"===o[e].name&&""!==o[e].value.trim()&&(o[e].value.length<3&&(l=generateError("Символов должно быть не меньше 3"),t[e].parentElement.classList.add("error"),t[e].parentElement.insertBefore(l,o[e].nextSibling),n=!1),-1!==o[e].value.search(/\d/)&&3<=o[e].value.length&&(r=generateError("После не может содержать числа"),t[e].parentElement.classList.add("error"),t[e].parentElement.insertBefore(r,o[e].nextSibling),n=!1)),"phone"===o[e].name&&""!==o[e].value.trim()&&o[e].value.length<18&&(r=generateError("Телефон введён некорректно"),t[e].parentElement.classList.add("error"),t[e].parentElement.insertBefore(r,o[e].nextSibling),n=!1)}return n};function openModalResult(e){let t=document.querySelector(".modal-result");var n=document.querySelector(".overlay-result");t.querySelector(".message").innerText=e,toggle(t,"active"),toggle(n,"active")}function togglePreloader(e){let t=document.querySelector(".loader-overlay"),n=document.querySelector(".loader");e&&!t.classList.contains("active")?(t.classList.add("active"),n.classList.add("active")):(t.classList.remove("active"),n.classList.remove("active"))}document.querySelectorAll(".toggle-result").forEach(e=>e.addEventListener("click",e=>{toggle(document.querySelector(".modal-result"),"active"),toggle(document.querySelector(".overlay-result"),"active")})),addEventListener("submit",e=>{e.preventDefault();e=e.target;removeValidation(e),checkFieldsPresence(e)&&(togglePreloader(!0),e=Object.fromEntries(new FormData(e).entries()),fetch("/send.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json()).then(function(e){togglePreloader(!1),e.status,openModalResult(e.message),document.querySelector(".overlay").classList.contains("active")&&(toggle(document.querySelector(".overlay"),"active"),toggle(document.querySelector(".modal"),"active"))}).catch(function(e){console.log("ERROR:",e),togglePreloader(!1),openModalResult("Что-то пошло не так. Попробуйте отправить заявку позже. Или позвоните нам."),document.querySelector(".overlay").classList.contains("active")&&(toggle(document.querySelector(".overlay"),"active"),toggle(document.querySelector(".modal"),"active"))}))});